## 其他常见问题

**问题1：**

DGUS屏点击按钮数据如何能自动上传到串口？

**解决方法：**

系统配置勾选上触摸自动上传，点击输出配置生成的config.txt更改R2的配置。config.txt必须需要用SD卡更新到屏，或者发指令配置R2 ,5A A5 03 80 12 0C 5A A5 03 80 1D 5A（总开关）（DGUSII屏产品修改CFG文件08位置，一般配置BC、B8即可）

2、按键返回（非基本触控）配置勾选上数据自动上传；（小开关）

上传的协议为5A A5 06 83 0001 01 000A其中按键返回地址0001 键值000A 注意 按键返回按下了之后这个地址里面就相当如一直有值了。

注：基本触控只有放置到弹出菜单 或者弹出键盘数据录入才能根据其根地址传值，弹出菜单键值设置范围0000-00FE可以传值，其中00FF不传值（通常设置为关闭弹窗按键用于不需要传值的按钮）。

**![img](file:////Users/invokerx/Library/Group%20Containers/UBF8T346G9.Office/msoclip1/01/clip_image030.gif) ![img](file:////Users/invokerx/Library/Group%20Containers/UBF8T346G9.Office/msoclip1/01/clip_image032.gif)**

 

 

 

 

 

**问题2：**

ED2和ED3如何使用？

**解决方法：**

ED2和ED3是一类产品，只是接口宽窄不同，使用时**波特率必须使用****6250000****，** **帧头必须为** **5A A5**，插上去，不要插反，USB供电灯会亮，安装驱动 XR21x141x-2.0.0.0(x86&x64) 设备管理器查看一下串口是几，不要和屏另一个串口弄混(SD卡是另外一个com口)

对于DGUSII屏的 T5UID1系列：

1、卡槽部分只是下载工程文件(13/14，字库、图标、图片等)；支持83读指令如5A A5 04 83 2001 02，不支持82指令。

2、不能通过使用T5OS软件由SD卡槽在线下载OS程序，串口4、串口5等均不支持下载，不支持ED3下载OS。（OS代码目前只能用T5OS软件通过串口2下载或者SD卡下载) 

3、不能下载.wav音乐文件、不支持下载内核文件T5OS_V12.bin、T5UID1_V11.bin；不支持下载CFG配置

4、ED3支持DGUSII系列86盒IOT产品，不支持D2、D3、C1、C2、C3、C4的产品，注意：ED2和ED3都不能适用于M系列的屏。

5、DGUS屏可以用串口1用OS软件进行下载，支持ED2下载OS。

所以ED3和ED2都像SD卡一样任何文件都能下载，另：有的DGUS的卡槽比如DMT48270T043-15WT带外壳的有碍插卡，卡槽太过于缩进，需要拆掉壳才能用ED3。

 

 

**问题3：**

初始值如何显示？

**解决方法：**

迪文屏需要设定了特定的22字库文件上电加载到变量地址显示初始值，

第一步：需要设置里面勾选初始值由22文件加载。

DGUS II屏产品配置CFG文件08位置。

第二步：需要将22文件拷入屏里面。

DGUS的软件点击保存，生成配置文件之后，13、14、22文件会重新生成，13是触控配置文件，14是显示的配置文件，配置文件下载勾选13，14并没有把初始值22文件下进去，SD卡可以单独下入，或者串口下载choose File点击否，选22文件，改position为22，下发也是很快捷的。

 

**问题4：**

DGUS控按钮如何变成指令控制触发？

**解决方法：**

DGUS I屏触控控件右上角如下图1，键控选项是01到FF之间可以设置255个键，把按钮设置键控之后，软件界面显示颜色会变灰，这个时候就需要触控指令触发 5A A5 03 80 4F 01（01表示例如设置的键值） 

注意 “变灰之后”触控就不起作用 

如果想触控和键控同时触发，需要再复制一个上去，一个设置键控、一个不设置， ‘黄色’和‘灰色’的方块可以覆盖存在的，灰色的键控放在此页面的任意位置都可以。

注：键控只对当前页面的指令有效，所有的触控控件都能设置指令触发。

如果是os程序触发每个周期只能执行一次。

![img](file:////Users/invokerx/Library/Group%20Containers/UBF8T346G9.Office/msoclip1/01/clip_image034.gif)![img](file:////Users/invokerx/Library/Group%20Containers/UBF8T346G9.Office/msoclip1/01/clip_image036.gif)

如果是DGUS II屏，要实现触摸屏操作模拟、代替触控，

访问系统变量地址0xD4： 

例如发送指令：5A A5 0B 82 00D4 5AA5 0004 00EE 008F 

（0004为点击，按下加抬起，00EE 008F （283，143）坐标，

按压模式 0x0001=按下 0x0002=松开 0x0003=持续按压 0x0004=点击（

按下+抬起）模拟按压模式0x0001 和0x0003 后，必须有0x0002 的模拟抬起模式。）

 

 

 

**问题5：**

软件里面找不到自己的屏对应的分辨率，或者处理图标大小等等怎么方便批量转换？

 

**解决方法：**

添加分辨率：首先打开我们的DGUS配置文件，里面有一个config文件夹，打开config文件夹里面有一个Terminal.ini 文件，打开后您可以看见一个R0-R10的选项，更改其中的分辨率即可。

DGUS II工具软件可以直接在新建工程或设置分辨率页面输入所需的分辨率。

 

 

**问题6：**

DGUS屏格式化？

**解决方法：**

1、DGUS屏格式化： config.txt里只写RB=5A,DWIN_SET文件夹只放config文件，插入屏会立即蓝屏，保持卡插着几分钟，屏会变灰， 屏的格式化就完成了。格式化过程中别断电。

一般再次显示的时候会发现数字 输入法都不管用了 其实是没有放入0号字库的和12输入法文件的原因。

2、DGUSII屏的格式化参考系统配置文件的Flash格式化，写入5AA5之后插卡，再下载的过程会先执行格式化NAND flash。

![img](file:////Users/invokerx/Library/Group%20Containers/UBF8T346G9.Office/msoclip1/01/clip_image038.gif)

 

**问题7：**

为什么我的图片有水波纹？

**解决方法：**

请联系迪文400客服处理水波纹的文档方法解决，可以明显优化。

 

**问题8：**

选型使用触摸屏的用电容和电阻的的选择。

**解决方法：**

本身DGUS屏虽然不支持多点触控，但是电容屏还是有他的众多优势的：透光好，用户手指触摸体验好等。

电容屏缺点：抗干扰能力没有电阻的强，电源要求比电阻屏的要高。

 

**问题9：**

迪文屏怎么和PLC连接？

**解决方法：**

如果您需要使用迪文屏和PLC连接，那么我们的屏就必须要走标准的MODBUS协议，如果您的PLC也是标准的MODBUS协议，那么我们只需要在我们的屏上开启MODBUS然后设置好MODBUS指令就可以和您的PLC成功通信。

 “DWIN OS Builder”是用来对我们的屏进行逻辑运算的，走MODBUS协议的时候一般是需要写OS来辅助我们的屏实现一些功能的（比如历史数据保存，动画屏保，密码登录等）通过OS也能解析PLC其他的串口协议。

迪文屏MODBUS的开发资料百度云盘  http://pan.baidu.com/s/1eREvh1g

 

**问题10：**

DGUS屏和指令屏新用户选哪个？

**解决方法：**

新客户推荐用DGUS屏。

HMI指令屏串口指令迪文2010年左右版本的串口屏开模式，大致开发是简单的通过一个上位机软件来进行界面图片、字库下载，然后发送命令过去把各种需要显示的文字、图形、等显示出来，以达到所需要的显示效果，触摸方面仅支持上传坐标、或者配置触控按键后传设定的值。包括2017年推出的T5UIC1、C2产品的模式，也是这样的开发模式。

DGUS屏串口屏带组态功能，各样功能都不再是简单的使用图片来做的粗糙操作，界面显示上支持图标、曲线、文本等各类显示控件，触摸上面支持键盘、拖动调节、增量调节等触控控件，触控的功能比串口指令集产品更加丰富好用，各个控件和内存地址RAM关联，用户发的指令只需要对地址操作，极大的精简了用户的指令代码

指令屏资料：  http://pan.baidu.com/s/1i4ZiQg9

 

 

**问题11：**

DGUS 5.04版本软件提示控件变量大于64？

**解决方法：**

通常这个提示是在DGUS的软件会遇到，迪文屏可以选择每个页面64变量或者128变量模式，在软件的欢迎使用那里（触控及变量配置左边的按钮），预定义参数=》每页最大配置变量数更改为128，然后回到界面，要点击配置 =》输出配置文件，这个时候就把CONFIG文件配置RC=10, 然后把CONFIG.txt文件下载到屏里面就可以了。注意没有必要把工程关闭了，改下图的红色框可以切换的。

![img](file:////Users/invokerx/Library/Group%20Containers/UBF8T346G9.Office/msoclip1/01/clip_image040.gif) ![img](file:////Users/invokerx/Library/Group%20Containers/UBF8T346G9.Office/msoclip1/01/clip_image042.gif)

 

问题延伸：有的用户现象工程中各种图标，数据变量等显示混乱，表现为原来0 1 2 3..页面的控件似乎变成了0, 2 4 6...的界面去了，

解决方法：检查客户的DGUS软件生成界面是否把每页最大变量显示数设置了128，但是config.txt里面配置还是RC=00，所以就异常了。

 

**问题13：**

迪文屏要实现隐藏按键需要怎么做？

**解决方法：**

可以用页面切换组合的办法：例如03和04是两个页面，03页面的“开始”按键之后，要求这个按键就不能再按了，那么切换到04页面去，04页面和03页面其他的显示控件和触控控件都是全部复制过来的，唯有这个“开始” 按键不放上去，03和04界面都一样区别就是那个按钮的地方做或者不做。这种方法不适合于大量的按钮组合，不然页面组合会比较多。

 

**DGUS II****屏可以发指令让触控开启或者关闭：**

访问0xB0变量地址是可以实现 **DGUS II**屏关闭单个触控文件：5A A5 0B 82 00B0 5AA5 0001 0905 0000 （关闭0001页面的第9个触控文件，按键值返回键码05(这键码值参考应用指南的表格第一列写如下图)，0000关闭触控

![img](file:////Users/invokerx/Library/Group%20Containers/UBF8T346G9.Office/msoclip1/01/clip_image044.gif)

![img](file:////Users/invokerx/Library/Group%20Containers/UBF8T346G9.Office/msoclip1/01/clip_image046.gif)

但是要注意基本触控，基础触控不能被控制开启/关闭，**他的序号其实不占用，他后面的控件编号实质号码要去掉前面基本触控的**。因此一旦在页面序号的排列中间时，生成13.BIN就会打乱可以控制的控件的顺序，把它们都调整到所有可控控件后面，这样方便键控的序号能一致。

1、打开触控控件的操作界面；

2、点击名称，找到客户要进行控制的触控控件；

3、使用上下调整的按钮，把需要控制的触控控件顺序，调整到最上面；

4、如果有多个控件需要控制，建议把基础控件移到最下方，需要控制的控件调整到最上面，依次放置；如下图：

![img](file:////Users/invokerx/Library/Group%20Containers/UBF8T346G9.Office/msoclip1/01/clip_image048.gif)

 

**问题14：**

迪文屏如何做进度条？

**解决方法：**

方法一：比如0-100 做100个图标，下线0 ，上限100，用图标的办法解决，这种方法的缺点是图标的长宽大小DGUS1的图标区域范围不能超过255x255像素，（T5的DGUSII屏支持最大1023x1023图标）如果刻度需要精确，需要美工做很多图片。这里通常适合用做圆形的进度条。

方法二：图片动画显示，也就是说要利用图片切换的原理

方法三：是基本图形剪切图片，也就是把其他页面的进度条的依照坐标剪切过来。另外的就是矩形填充等。

指令：5A A5 +长度+ 82  0005 0004 0001           +左上角坐标+左下角坐标 + F800红色

用户如果不用OS处理，串口发矩形填充指令也行

先取坐标：例如要实现0~100的范围值，更改右下角x/100就能随着变化，例如取x横坐标变化范围420-20=400，分成100等分，则变化量为4，每增减1值坐标的值增减4。

 

**问题15：**

工程做好了，单要修改其中的一张，图片怎么替换？

![img](file:////Users/invokerx/Library/Group%20Containers/UBF8T346G9.Office/msoclip1/01/clip_image050.gif)比如把中间的1图替换一下

**解决方法：**

新图片和这个（1_菜单.bmp ）命名一样，然后关闭软件，直接复制新图片到DWIN_SET，选择替换，再次打开软件demo，发现demo里面的界面也替换了。 

 

 

 

**问题16：**

手中只有一个DWIN_SET里面的内容怎么还原能打开的工程？

**解决方法：**

第一步：新建一个文件夹 ，新建工程，添加图片，
 第二步：把ICO、等字库文件、config.txt或cfg系统配置文件，复制到新的文件夹工程DWIN_SET里面。
 第三步 点击导入，选择以前的DWIN_SET 。
 这个步骤是可以将任何一个单独的DWIN_SET还原的方法，但是将OS程序23.bin是无法还原为可编译的ASM文件。

如果是偏转了90度显示的DWIN_SET，先点击鼠标右键将所有图片都顺时针旋转90度再还原.

 

**问题17：**

液晶屏的寿命？

**解决方法：**

答：包括3部分：

1.玻璃  寿命在15-20年；

2.偏光片等膜材  寿命一般在10年左右，取决于环境的降解水平（比如紫外线环境寿命就短）。

3.背光  亮度半衰期（荧光粉的原因）在2-3万小时，不是说2-3万小时就不亮、坏了，而是亮度会降低。把背光调低可以增加屏的使用寿命的。背光如果关闭不占用屏的寿命。

 

**问题18：**

点击触摸屏触控按钮如果下位机由于某种原因没接收到正确的数据，当前页面还会有数据下发吗？

**解决方法：**

答：触控不会再次发送。

所以一般建议主动上传数据的按键。

按键把数据传给单片机，单片机收到之后，再回馈切换屏的图标、数据显示、或者页面。 

这样的好处是：即使由于某种串口通信干扰等原因，屏按键主动发出的数据单片机偶尔收不到或者错误，单片机没有做出相应，屏却切换了页面，为了避免上述的不同步现象

用户呢，看到没有动作，会人工手动点击的，因为只要硬件做好了，串口通信异常的次数频率发生不多。

可以参考传值的设计：页面切换的地址都用一个 比如0001

键值就0000 0001 0002 0003

键值和页面同步起来

功能性的地址可以用另外的比如0002，0003，键值根据用户需要定义。  

 

**问题19：**

请问串口屏设置一些参数A、B、C…，然后点击按钮X保存，这些参数怎么传递给单片机？ 

**解决方法：**

①保存的按钮X用按键返回，按键返回按下了之后传值给单片机，单片机收到了，再去用83指令参数A、B、C…的地址，如果这几个地址连续，读起始地址就行。

②用同步按压返回02模式，将地址的数据发出来，需要在前面地址写好帧头和数据格式。

③利用os处理，os判断按键返回按下了，在用os的COMTXI指令将数据发出来。

 

**问题20：**

新的工程拷进去，一开始会有出厂的页面还存在，这个怎么办?

**解决方法：**

可能情况1：新的工程没有从0开始命名，所以0号图片没有覆盖。

可能情况2：DGUSII屏出厂有开机动画，用户做的工程只点击了保存，没有点击生成，而放的图片如果只有0图片，那么即使下载完成，0图片一闪一下，跟着运行DGUS出厂的动画了。

 

 

**问题21：**

DGUS屏上电可以设置显示为黑色吗？

**解决方法：**

建议用用一个纯黑色的图片代替开机为0页面黑色。

 

**问题23：**

用第三方TS3软件能否做加粗、斜体这样的字体？

**解决方法：**

TS3软件的加粗和斜体不能直接做的，需要路径选择的字体库本身就是加粗、斜体的字体才行。

 

**问题24：**

迪文屏带语音的屏要选多大的喇叭合适？

**解决方法：**

8Ω 5W的喇叭声音就很大了，可以参考选这个大小左右的都行。

 

**问题25：**

为什么DGUSII屏的RTC改用超级法拉电容？

**解决方法：**

超级法拉电容在屏上电时充电，断电时给屏的RTC供电可持续一个月时间，这样理论上只要法拉电容不坏屏的RTC可以一直使用，改善了以前那种RTC电池使用一定时间后就要更换电池的情况，还有一个好处是没有了电池，可以在物流运输的时候发航空件。

 

**问题26：**

更改分辨率，例如把1024*600的分辨率改成800*480的？

**解决方法：**

为了避免把原工程转换损坏，请将原来的工程做一个复件备份，在复件上面操作：

软件打开10600的工程，选择自己合适的分辨率800x480，点击保存、生成、另存为选是，存到另外一个文件夹A。保存到文件夹的A的就是新的分辨率工程了。

因为屏的像素整体变化了，如果用了图标图标，图标的大小一般需要重新调整，如果用了文本数据，字体大小是也需要重新修改的。

 

**问题27：**

串口指令集产品握手能成功，但是下载字库或者触控文件会提示超时或者下载失败？

**解决方法：**

可能是电脑系统和软件的兼容性问题，可以改用SSCOM32串口工具，点击打开文件，选择字库，发送：AA F2 F2 F2 5A A5 <Lib_ID> CC 33 C3 3C

​     应答：Please Tx Text_Lib!

​     然后点击**“发送文件”**

 <Lib_ID>是字库的储存位置，参考HMI指令集开发指南3.21节。

例如要下载触控文件，发送：AA F2 F2 F2 5A A5 1E CC 33 C3 3C

 

**问题28**

DGUS II中的CFG文件如何使用？

**解决方法：**

DGUS II中的CFG文件与过去DGUS中的CONFIG.txt不同，大体上功能是相同的，不过在CFG文件中用户能够配置的内容更多。从下表中详细罗列了CFG文件的配置方式。CFG文件中采用十六进制编译 ，可以通过Uedit32等软件进行编辑。

![img](file:////Users/invokerx/Library/Group%20Containers/UBF8T346G9.Office/msoclip1/01/clip_image052.gif)

注意事项：

1. CFG文件无法通过软件7.35版本直接生成，可复制DGUS II软件生成的22.BIN文件，在里面编辑，编辑完成后修改文件名和后缀名就可以了。

2. CFG文件的命名需与使用的产品内核保持一致。例如，如果使用的是T5UID1内核的产品，则CFG文件的全名应当为T5UID1.CFG。

配置示例：

![IMG_256](file:////Users/invokerx/Library/Group%20Containers/UBF8T346G9.Office/msoclip1/01/clip_image054.gif)

 

**问题29**

DGUS II上的COM2和COM4区别是什么？

 

**解决方法：**

首先，需要了解如下两点,

1. DGUS II本身采用的主芯片是双核的T5 CPU，这个双核芯片的两个核分工不同，分别运行DGUS程序和DWIN OS程序。

2. 为了方便开发者的使用，在DGUS II产品的硬件上定义好了COM2和COM4的接口，COM2和COM4分别连接到运行DGUS的核和运行DWIN OS的核。

由此也可以看出，T5 CPU的两个核的运行是完全相互独立的，互相不会占用对方CPU的资源、不影响对方CPU的性能。通常用户只需使用DGUS II来开发人机交互的用户界面，因此只需使用COM2即可，如果有需要时，可选择使用COM4,使用串口4或者其他的串口需要用迪文的os汇编或者c语言进行串口协议的编程解析。